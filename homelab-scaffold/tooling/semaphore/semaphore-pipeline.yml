# Example Semaphore pipeline - adapt runner/targets to your environment
version: v1
name: "Homelab deploy - docker compose up (example)"
agent:
  machine:
    type: e1-standard-2
blocks:
  - name: "Deploy all nodes"
    tasks:
      - name: "Deploy nodes via docker compose"
        commands:
          - echo "This job expects access (ssh/runner) to the deployment host(s)."
          - |
            for node in edge-sec-cloud automation-devops personal-apps media-core observability backup-core; do
              echo "Deploying $node ..."
              # Adjust: replace /srv/homelab with your deployment path on the target runner
              docker compose -f /srv/homelab/nodes/$node/docker-compose.yml up -d
            done
